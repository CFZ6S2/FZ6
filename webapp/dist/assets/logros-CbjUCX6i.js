import{a as v,d as f}from"./firebase-config-env-BtJ4KElt.js";/* empty css               */import"./firebase-appcheck-B5Dlx5A0.js";import{getDoc as P,doc as C,query as h,collection as R,getDocs as A}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";import{onAuthStateChanged as x}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import{l as L}from"./theme-BOByySXs.js";import{s as I}from"./utils-B649B8Z6.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-functions.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app-check.js";import"./logger-CnI7WBtq.js";const o={PROFILE:"profile",SOCIAL:"social",DATING:"dating",PREMIUM:"premium",SPECIAL:"special"},u={PROFILE_COMPLETE:{id:"profile_complete",name:"Perfil Completo",description:"Completaste tu perfil al 100%",icon:"‚úÖ",category:o.PROFILE,rarity:"common",points:10,condition:"Profile fully completed with all fields and photos"},PHOTO_PRO:{id:"photo_pro",name:"Fot√≥grafo Pro",description:"Subiste 5 fotos de alta calidad",icon:"üì∏",category:o.PROFILE,rarity:"common",points:15,condition:"Upload 5 photos"},VERIFIED_USER:{id:"verified_user",name:"Usuario Verificado",description:"Verificaste tu identidad con documento",icon:"‚úì",category:o.PROFILE,rarity:"rare",points:50,condition:"Identity verification completed"},FIRST_MATCH:{id:"first_match",name:"Primera Conexi√≥n",description:"Hiciste tu primer match",icon:"ü§ù",category:o.SOCIAL,rarity:"common",points:20,condition:"First match accepted"},SOCIAL_BUTTERFLY:{id:"social_butterfly",name:"Mariposa Social",description:"Tienes 10+ conversaciones activas",icon:"ü¶ã",category:o.SOCIAL,rarity:"uncommon",points:30,condition:"10+ active conversations"},POPULAR:{id:"popular",name:"Popular",description:"Recibiste 50+ solicitudes de match",icon:"‚≠ê",category:o.SOCIAL,rarity:"rare",points:40,condition:"50+ match requests received"},INFLUENCER:{id:"influencer",name:"Influencer",description:"Referiste a 10+ usuarios",icon:"üì¢",category:o.SOCIAL,rarity:"epic",points:100,condition:"10+ successful referrals"},FIRST_DATE:{id:"first_date",name:"Primera Cita",description:"Completaste tu primera cita",icon:"‚ù§Ô∏è",category:o.DATING,rarity:"common",points:25,condition:"First date completed"},DATE_PRO:{id:"date_pro",name:"Experto en Citas",description:"Completaste 10+ citas exitosas",icon:"üíØ",category:o.DATING,rarity:"rare",points:75,condition:"10+ dates completed"},PUNCTUAL:{id:"punctual",name:"Puntual",description:"Nunca plantaste a nadie (10+ citas)",icon:"‚è∞",category:o.DATING,rarity:"epic",points:100,condition:"10+ dates, 0 ghosting incidents"},RELATIONSHIP_GURU:{id:"relationship_guru",name:"Gur√∫ de Relaciones",description:"Lograste una relaci√≥n seria",icon:"üíë",category:o.DATING,rarity:"legendary",points:200,condition:"Successful relationship established"},EARLY_ADOPTER:{id:"early_adopter",name:"Pionero",description:"Uno de los primeros 1000 usuarios",icon:"üåü",category:o.PREMIUM,rarity:"rare",points:50,condition:"Registered in first 1000 users"},VIP_MEMBER:{id:"vip_member",name:"Miembro VIP",description:"Membres√≠a activa por 6+ meses",icon:"üëë",category:o.PREMIUM,rarity:"epic",points:150,condition:"6+ months active membership"},PLATINUM_MEMBER:{id:"platinum_member",name:"Miembro Platino",description:"Alcanzaste reputaci√≥n Platino",icon:"üíé",category:o.PREMIUM,rarity:"legendary",points:200,condition:"Platinum reputation achieved"},INSURED:{id:"insured",name:"Asegurado",description:"Compraste el seguro anti-plant√≥n",icon:"üõ°Ô∏è",category:o.PREMIUM,rarity:"uncommon",points:30,condition:"Anti-ghosting insurance purchased"},CONCIERGE:{id:"concierge",name:"Concierge VIP",description:"Organizas eventos VIP",icon:"üé©",category:o.SPECIAL,rarity:"legendary",points:300,condition:"Concierge role active"},EVENT_HOST:{id:"event_host",name:"Anfitri√≥n Estrella",description:"Organizaste 5+ eventos VIP exitosos",icon:"üéâ",category:o.SPECIAL,rarity:"epic",points:150,condition:"5+ successful VIP events hosted"},NIGHT_OWL:{id:"night_owl",name:"B√∫ho Nocturno",description:"Activo principalmente despu√©s de las 10 PM",icon:"ü¶â",category:o.SPECIAL,rarity:"uncommon",points:20,condition:"70%+ activity after 10 PM"},EARLY_BIRD:{id:"early_bird",name:"Madrugador",description:"Activo principalmente antes de las 8 AM",icon:"üê¶",category:o.SPECIAL,rarity:"uncommon",points:20,condition:"70%+ activity before 8 AM"},WEEKEND_WARRIOR:{id:"weekend_warrior",name:"Guerrero de Fin de Semana",description:"M√°s activo los fines de semana",icon:"üéÆ",category:o.SPECIAL,rarity:"common",points:15,condition:"60%+ activity on weekends"},ADMIN:{id:"admin",name:"Administrador",description:"Parte del equipo de TuCitaSegura",icon:"üîß",category:o.SPECIAL,rarity:"legendary",points:500,condition:"Admin role"}},E={common:{name:"Com√∫n",color:"#9ca3af",emoji:"‚ö™"},uncommon:{name:"Poco Com√∫n",color:"#22c55e",emoji:"üü¢"},rare:{name:"Raro",color:"#3b82f6",emoji:"üîµ"},epic:{name:"√âpico",color:"#a855f7",emoji:"üü£"},legendary:{name:"Legendario",color:"#f59e0b",emoji:"üü°"}};function B(e){return Object.values(u).filter(t=>t.category===e)}function M(e){const t=[{level:1,name:"Novato",minPoints:0,icon:"üå±"},{level:2,name:"Aprendiz",minPoints:50,icon:"üåø"},{level:3,name:"Competente",minPoints:150,icon:"üçÄ"},{level:4,name:"Experto",minPoints:300,icon:"üå≥"},{level:5,name:"Maestro",minPoints:500,icon:"üéã"},{level:6,name:"Leyenda",minPoints:1e3,icon:"üåü"}];let i=t[0],n=t[1];for(let a=0;a<t.length&&e>=t[a].minPoints;a++)i=t[a],n=t[a+1]||null;return{current:i,next:n,progress:n?(e-i.minPoints)/(n.minPoints-i.minPoints)*100:100,pointsToNext:n?n.minPoints-e:0}}function S(e){return E[e]||E.common}let g=null,r=null,m=[],p=0;x(v,async e=>{if(!e){window.location.href="../index.html";return}g=e,await _()});async function _(){try{const e=await P(C(f,"users",g.uid));if(!e.exists()){I("Usuario no encontrado","error");return}r=e.data(),L(r),await b();const t=await T();d("profile","profileBadges",t),d("social","socialBadges",t),d("dating","datingBadges",t),d("premium","premiumBadges",t),d("special","specialBadges",t),O(),D()}catch(e){console.error("Error loading user data:",e),I("Error al cargar datos","error")}}async function b(){try{const e=h(R(f,`users/${g.uid}/earned_badges`));m=(await A(e)).docs.map(i=>i.id),p=m.reduce((i,n)=>{const a=Object.values(u).find(s=>s.id===n);return i+(a?.points||0)},0)}catch(e){console.error("Error loading earned badges:",e)}}async function T(){return{totalMatches:r.stats?.totalMatches||0,activeConversations:r.stats?.activeConversations||0,matchRequestsReceived:r.stats?.matchRequestsReceived||0,successfulReferrals:r.referralStats?.completedReferrals||0,completedDates:r.stats?.completedDates||0,ghostingIncidents:r.stats?.ghostingIncidents||0,membershipMonths:r.stats?.membershipMonths||0}}function d(e,t,i){const n=document.getElementById(t),a=B(e);n.innerHTML="",a.forEach(s=>{const y=m.includes(s.id),l=S(s.rarity),c=document.createElement("div");c.className=`badge-card glass rounded-xl p-6 text-center ${y?"earned":"locked"}`,c.style.borderColor=l.color,c.style.borderWidth="2px",c.innerHTML=`
          <div class="badge-icon mb-3">${s.icon}</div>
          <div class="font-bold text-lg mb-1">${s.name}</div>
          <div class="text-xs text-gray-600 mb-2">${l.emoji} ${l.name}</div>
          <div class="text-sm text-gray-700 mb-3">${s.description}</div>
          <div class="text-xs font-semibold" style="color: ${l.color}">
            +${s.points} puntos
          </div>
          ${y?'<div class="mt-2 text-green-600"><i class="fas fa-check-circle"></i> Desbloqueado</div>':'<div class="mt-2 text-gray-500"><i class="fas fa-lock"></i> Bloqueado</div>'}
        `,n.appendChild(c)})}function O(){const e=M(p);document.getElementById("levelIcon").textContent=e.current.icon,document.getElementById("currentLevel").textContent=e.current.level,document.getElementById("levelName").textContent=e.current.name,document.getElementById("totalPoints").textContent=p,e.next?(document.getElementById("levelProgress").style.width=`${e.progress}%`,document.getElementById("progressPercentage").textContent=`${Math.round(e.progress)}%`,document.getElementById("nextLevelInfo").textContent=`Te faltan ${e.pointsToNext} puntos para alcanzar el nivel ${e.next.level} (${e.next.name})`):(document.getElementById("levelProgress").style.width="100%",document.getElementById("progressPercentage").textContent="100%",document.getElementById("nextLevelInfo").textContent="¬°Has alcanzado el nivel m√°ximo!")}function D(){const e=Object.keys(u).length,t=m.length,i=e-t,n=Math.round(t/e*100);document.getElementById("totalBadges").textContent=e,document.getElementById("earnedBadges").textContent=t,document.getElementById("lockedBadges").textContent=i,document.getElementById("completionPercentage").textContent=`${n}%`}
