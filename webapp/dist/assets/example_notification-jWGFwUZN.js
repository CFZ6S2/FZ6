import{f as d}from"./firebase-config-env-BtJ4KElt.js";/* empty css               */import{initializeApp as l}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getAuth as m,onAuthStateChanged as f}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import{getFirestore as p}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";import{getFunctions as u,httpsCallable as g}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js";import{i as c,g as r,r as h,a as y,s as E}from"./notifications-kMvx_muo.js";import{s as n}from"./utils-B649B8Z6.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-functions.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-messaging.js";const s=l(d),b=m(s);p(s);const v=u(s);f(b,async e=>{if(e){const t=await c();if(o(t),t){const i=r();i&&(document.getElementById("fcm-token-display").classList.remove("hidden"),document.getElementById("fcm-token").textContent=i)}}else o(!1)});function o(e){const t=document.getElementById("notification-status"),i=document.getElementById("enable-notifications-btn"),a=document.getElementById("test-notification-btn");e?(t.innerHTML=`
          <i class="fas fa-check-circle text-green-500 text-2xl"></i>
          <span class="text-white">Notificaciones activadas</span>
        `,i.classList.add("hidden"),a.classList.remove("hidden")):(t.innerHTML=`
          <i class="fas fa-times-circle text-red-500 text-2xl"></i>
          <span class="text-white">Notificaciones desactivadas</span>
        `,i.classList.remove("hidden"),a.classList.add("hidden"))}document.getElementById("enable-notifications-btn").addEventListener("click",async()=>{if(await h()){await c(),o(!0),n("¡Notificaciones activadas correctamente!","success");const t=r();t&&(document.getElementById("fcm-token-display").classList.remove("hidden"),document.getElementById("fcm-token").textContent=t)}else n("No se pudieron activar las notificaciones","error")});document.getElementById("test-notification-btn").addEventListener("click",async()=>{try{const t=await g(v,"sendTestNotification")();console.log("Test notification result:",t),n("Notificación de prueba enviada","success")}catch(e){console.error("Error sending test notification:",e),n("Error al enviar notificación de prueba","error")}});document.getElementById("notification-bell").addEventListener("click",()=>{y()?n("Las notificaciones ya están activadas","info"):E()});
