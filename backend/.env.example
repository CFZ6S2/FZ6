# ============================================================================
# TuCitaSegura Backend - Environment Variables
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=production  # development, staging, production
DEBUG=false  # Set to false in production!

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_TITLE=TuCitaSegura API
API_VERSION=1.0.0
API_DESCRIPTION=Backend API para TuCitaSegura - Plataforma de citas seguras

# ============================================================================
# FIREBASE
# ============================================================================
FIREBASE_PROJECT_ID=tuscitasseguras-2d1a6
FIREBASE_PRIVATE_KEY_PATH=./serviceAccountKey.json
# Download from: Firebase Console → Project Settings → Service Accounts

# Firebase Cloud Messaging (Push Notifications)
# Get from: Firebase Console → Project Settings → Cloud Messaging → Web Push certificates
VAPID_PUBLIC_KEY=your_vapid_public_key_here
VAPID_PRIVATE_KEY=your_vapid_private_key_here
# ⚠️ VAPID_PRIVATE_KEY es sensible - NUNCA la compartas ni la subas a GitHub

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
# Production (Railway/Render automatically provides this)
DATABASE_URL=postgresql://user:password@host:5432/tucitasegura
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=0

# Local Docker:
# DATABASE_URL=postgresql://tucitasegura:changeme@postgres:5432/tucitasegura

# ============================================================================
# REDIS
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# ============================================================================
# PAYMENT PROVIDERS
# ============================================================================
# Stripe (PRODUCTION KEYS - Keep secret!)
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxx

# Test keys (for development):
# STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxx
# STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxx

# PayPal (PRODUCTION KEYS - Keep secret!)
PAYPAL_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxx
PAYPAL_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxx
PAYPAL_MODE=live  # sandbox for testing, live for production
PAYPAL_WEBHOOK_ID=xxxxxxxxxxxxxxxxxxxxx
# Get from: https://developer.paypal.com/dashboard/applications

# Test keys (for development):
# PAYPAL_CLIENT_ID=sb-xxxxxxxxxxxxxxxxxxxxx
# PAYPAL_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxx
# PAYPAL_MODE=sandbox

# ============================================================================
# GOOGLE MAPS
# ============================================================================
GOOGLE_MAPS_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# Get from: https://console.cloud.google.com/apis/credentials

# ============================================================================
# OPENAI (Optional - advanced NLP)
# ============================================================================
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Get from: https://platform.openai.com/api-keys

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# CRITICAL: Generate a secure random key - DO NOT use default values!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Example output: dGVzdGluZ19zZWNyZXRfa2V5X2RvX25vdF91c2VfaW5fcHJvZHVjdGlvbg
SECRET_KEY=
# The SECRET_KEY validator will reject:
# - Keys shorter than 32 characters
# - Keys containing: "example", "test", "password", "changeme", etc.
# - Keys that are too simple (only letters, only numbers, etc.)
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# DATA ENCRYPTION
# ============================================================================
# CRITICAL: Clave para encriptar datos sensibles (teléfonos de emergencia, etc.)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# Or run: python backend/app/services/security/encryption_service.py generate-key
ENCRYPTION_KEY=
# ⚠️  NUNCA compartas esta clave ni la subas a GitHub
# ⚠️  Si cambias la clave, los datos encriptados anteriormente NO se podrán desencriptar

# ============================================================================
# EMAIL (SMTP)
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@tucitasegura.com
SMTP_PASSWORD=your_smtp_password
FROM_EMAIL=noreply@tucitasegura.com
FROM_NAME=TuCitaSegura
# Gmail: Enable 2FA + App Password: https://myaccount.google.com/apppasswords

# ============================================================================
# MONITORING (Sentry)
# ============================================================================
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxx@xxxxxx.ingest.sentry.io/xxxxxxx
# Get from: https://sentry.io/settings/projects/your-project/keys/

# ============================================================================
# MACHINE LEARNING
# ============================================================================
ML_MODEL_PATH=./models
ML_ENABLE_TRAINING=false
ML_MIN_SAMPLES_FOR_TRAINING=100

# ============================================================================
# COMPUTER VISION
# ============================================================================
CV_MAX_IMAGE_SIZE=5242880
CV_ALLOWED_FORMATS=jpg,jpeg,png,webp
CV_FACE_DETECTION_CONFIDENCE=0.7

# ============================================================================
# SECURITY
# ============================================================================
MAX_LOGIN_ATTEMPTS=5
LOGIN_ATTEMPT_WINDOW_MINUTES=15
PASSWORD_MIN_LENGTH=8

# reCAPTCHA v3 (Bot Protection)
# Get from: https://www.google.com/recaptcha/admin/create
# Choose reCAPTCHA v3 for invisible bot protection
RECAPTCHA_SECRET_KEY=
RECAPTCHA_MIN_SCORE=0.5
# Production recommended: 0.5-0.7 (stricter)
# Development: 0.3 (more permissive for testing)
# Score ranges: 0.0 (bot) to 1.0 (human)
# ⚠️ For development/testing, leave empty to bypass reCAPTCHA validation

# Security Headers
# HSTS (HTTP Strict Transport Security) - forces HTTPS
ENABLE_HSTS=true
# Production: true (strongly recommended)
# Development: false (if testing on HTTP)
HSTS_MAX_AGE=31536000
# 31536000 = 1 year (recommended for production)
# 63072000 = 2 years (for preload list)
CSP_REPORT_URI=
# Optional: URI to send CSP violation reports
# Example: https://yourcompany.report-uri.com/r/d/csp/enforce

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# CORS
# ============================================================================
# Comma-separated list (NO SPACES after commas!)
CORS_ORIGINS=https://tucitasegura.com,https://www.tucitasegura.com
# Development: CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# Railway: Add all vars in Railway Dashboard → Variables
# Render: Add in Render Dashboard → Environment
# Cloud Run: Use Secret Manager for sensitive data
